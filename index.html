<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>频谱图</title>
    <script src="js/echarts.min.js"></script>
    <script src="js/html2canvas.min.js"></script>
</head>
<style>
    @font-face {
        font-family: "UniFont";
        src: url(./js/Unifont2.ttf);
    }

    .input-wrapper {
        position: relative;
        display: inline-block;
    }

    .input-wrapper input {
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
    }

    .input-wrapper input:focus {
        outline: none;
        border-color: #6c63ff;
        box-shadow: 0 0 5px rgba(108, 99, 255, 0.3);
    }

    .input-wrapper label {
        position: absolute;
        top: 50%;
        left: 10px;
        transform: translateY(-50%);
        color: #777;
        pointer-events: none;
        transition: 0.2s;
    }

    .input-wrapper input:focus+label,
    .input-wrapper input:not(:placeholder-shown)+label {
        top: 5px;
        font-size: 12px;
        color: #6c63ff;
    }

    .button {
        display: inline-block;
        padding: 10px 20px;
        font-size: 16px;
        font-weight: bold;
        text-align: center;
        text-decoration: none;
        background-color: #6c63ff;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s;
    }

    .button:hover {
        background-color: #5249e6;
    }

    .button:active {
        background-color: #3c33b3;
    }

    .button:focus {
        outline: none;
        box-shadow: 0 0 5px rgba(108, 99, 255, 0.3);
    }

    .select {
        display: inline-block;
        padding: 10px;
        font-size: 16px;
        font-weight: bold;
        color: #333;
        border: 2px solid #ccc;
        border-radius: 4px;
        background-color: #fff;
        cursor: pointer;
        outline: none;
        appearance: none;
        -webkit-appearance: none;
    }

    .select option {
        font-size: 16px;
        color: #333;
    }

    .select:hover {
        border-color: #6c63ff;
    }

    .select:focus {
        border-color: #6c63ff;
        box-shadow: 0 0 5px rgba(108, 99, 255, 0.3);
    }
</style>


<body>
    <div style="display: flex;">
        <div id="echarts" style="float:left;width: 820px;height:680px;" class="mar"></div>
    </div>
    <div style="display: flex;">
        <div style="float:right;margin-top: 20px;margin-left: 50x;">
            <div style="margin-top: 20px">
                <div class="input-wrapper">
                    <input type="text" id="init_fr" size="18" placeholder=" " />
                    <label for="init_fr_label">底噪设置，默认-105</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="init_fr_radom" size="18" placeholder=" " />
                    <label for="init_fr_radom_label">底噪随机数设置，默认0.75</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="StartFrequency" size="18" placeholder=" " />
                    <label for="StartFrequency_label">开始频率：，默认930</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="StopFrequency" size="18" placeholder=" " />
                    <label for="StopFrequency_label">结束频率：，默认934</label>
                </div>
            </div>
            <div style="margin-top: 20px">
                <div class="input-wrapper">
                    <input type="text" id="M1_db" size="18" placeholder=" " />
                    <label for="M1">M1_dB：</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M1_i" size="18" placeholder=" " />
                    <label for="M1">开始位置</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M1_c" size="18" placeholder=" " />
                    <label for="M1">中心位置</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M1_updownini" size="18" placeholder=" " />
                    <label for="M1">上升下降曲线参数1,默认值为3</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M1_updown" size="18" placeholder=" " />
                    <label for="M1">上升下降曲线参数2,默认值为3</label>
                </div>
                <dvi>
                    <select class="select" id="mySelect1">
                        <option value="s1">峰值出现在位置1</option>
                        <option value="s2">峰值出现在位置2</option>
                        <option value="s3">峰值出现在位置3</option>
                    </select>
                </dvi>
                <dvi>
                    <select class="select" id="mySelectWidth1">
                        <option value="topWidth1">顶峰宽度:20</option>
                        <option value="topWidth2">顶峰宽度:30</option>
                    </select>
                </dvi>
                <div class="input-wrapper">
                    <input type="text" id="bottom_width1" size="18" placeholder=" " />
                    <label for="bottom_width1_label">底部两边宽度，默认值15</label>
                </div>
            </div>
            <div style="margin-top: 20px">
                <div class="input-wrapper">
                    <input type="text" id="M2_db" size="18" placeholder=" " />
                    <label for="M2">M2_dB：</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M2_i" size="18" placeholder=" " />
                    <label for="M2">开始位置</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M2_c" size="18" placeholder=" " />
                    <label for="M1">中心位置</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M2_updownini" size="18" placeholder=" " />
                    <label for="M1">上升下降曲线参数1,默认值为3</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M2_updown" size="18" placeholder=" " />
                    <label for="M1">上升下降曲线参数2,默认值为3</label>
                </div>
                <dvi>
                    <select class="select" id="mySelect2">
                        <option value="s1">峰值出现在位置1</option>
                        <option value="s2">峰值出现在位置2</option>
                        <option value="s3">峰值出现在位置3</option>
                    </select>
                </dvi>
                <dvi>
                    <select class="select" id="mySelectWidth2">
                        <option value="topWidth1">顶峰宽度:20</option>
                        <option value="topWidth2">顶峰宽度:30</option>
                    </select>
                </dvi>
                <div class="input-wrapper">
                    <input type="text" id="bottom_width2" size="18" placeholder=" " />
                    <label for="bottom_width2_label">底部两边宽度，默认值15</label>
                </div>
            </div>
            <div style="margin-top: 20px">
                <div class="input-wrapper">

                    <input type="text" id="M3_db" size="18" placeholder=" " />
                    <label for="M3">M3_dB：</label>
                </div>
                <div class="input-wrapper">

                    <input type="text" id="M3_i" size="18" placeholder=" " />
                    <label for="M3">开始位置</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M3_c" size="18" placeholder=" " />
                    <label for="M1">中心位置</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M3_updownini" size="18" placeholder=" " />
                    <label for="M1">上升下降曲线参数1,默认值为3</label>
                </div>
                <div class="input-wrapper">
                    <input type="text" id="M3_updown" size="18" placeholder=" " />
                    <label for="M1">上升下降曲线参2,默认值为3</label>
                </div>
                <dvi>
                    <select class="select" id="mySelect3">
                        <option value="s1">峰值出现在位置1</option>
                        <option value="s2">峰值出现在位置2</option>
                        <option value="s3">峰值出现在位置3</option>
                    </select>
                </dvi>
                <dvi>
                    <select class="select" id="mySelectWidth3">
                        <option value="topWidth1">顶峰宽度:20</option>
                        <option value="topWidth2">顶峰宽度:30</option>
                    </select>
                </dvi>
                <div class="input-wrapper">
                    <input type="text" id="bottom_width3" size="18" placeholder=" " />
                    <label for="bottom_width3_label">底部两边宽度，默认值15</label>
                </div>
            </div>
            <button type="button" value="生成频谱图" name="生成频谱图" id="test_button" class="button"
                style="margin-top: 20px">生成频谱图</button>
            <button type="button" value="导出频谱图" name="生成频谱图" id="export_button" class="button"
                style="margin-top: 20px">导出频谱图</button>
        </div>
    </div>
    <div id="echarts2" style="width: 820px;height:680px;" class="mar" style="display: none;"></div>


    <script type="text/javascript">
        //生成正态分布随机数
        function generateNormalDistribution(mean, standardDeviation) {
            let u = 0,
                v = 0;
            while (u === 0) u = Math.random();
            while (v === 0) v = Math.random();
            const z = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
            return mean + z * standardDeviation;
        }
        function generateRandomInteger(min, max) {
            // return Math.floor(Math.random() * (max - min + 1)) + min;
            // 生成指定范围的随机数
            const randomNum = Math.random() * (max - min) + min;
            // 保留两位小数
            const roundedNum = Math.round(randomNum * 100) / 100;
            return roundedNum;
        }

        function getMax(arr, startIndex, endIndex) {
            var maxNum = arr[startIndex]
            for (var i = startIndex; i <= endIndex; i++) {
                if (maxNum <= arr[i]) {
                    maxNum = arr[i];
                }
            }

            return maxNum.toFixed(2);
        }

        function getMaxIndex(arr, startIndex, endIndex) {
            var maxNum = startIndex
            for (var i = startIndex; i <= endIndex; i++) {
                if (arr[maxNum] <= arr[i]) {
                    maxNum = i;
                }
            }

            return maxNum;
        }
        var xy = 600;
        var x_data = [];
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('echarts'));
        var myChart2 = echarts.init(document.getElementById('echarts2'));

        var StartFrequency = parseFloat(930).toFixed(6);
        var StopFrequency = parseFloat(934).toFixed(6);
        for (var i = 0; i < xy; i++) {
            x_data.push(StartFrequency + i * ((StopFrequency - StartFrequency) / xy))
        }

        //输入的参数
        var init = -105;
        var init_fr_radom = 0.75;
        var mark1 = 0;
        var mark2 = 0;
        var mark3 = 0;
        var starPoint1 = 0;
        var starPoint2 = 0
        var starPoint3 = 0
        var centerPint1 = null;
        var centerPint2 = null;
        var centerPint3 = null;
        var M1_updown = 0;
        var M2_updown = 0;
        var M3_updown = 0;
        var M1_updownini = 0;
        var M2_updownini = 0;
        var M3_updownini = 0;
        var bottom_width1 = 15;
        var bottom_width2 = 15;
        var bottom_width3 = 15;
        document.getElementById('test_button').addEventListener('click', function () {
            // 使用刚指定的配置项和数据显示图表。
            mark1 = parseFloat(document.getElementById("M1_db").value) == undefined ? 0 : parseFloat(document.getElementById("M1_db").value);
            mark2 = parseFloat(document.getElementById("M2_db").value) == undefined ? 0 : parseFloat(document.getElementById("M2_db").value);
            mark3 = parseFloat(document.getElementById("M3_db").value) == undefined ? 0 : parseFloat(document.getElementById("M3_db").value);
            starPoint1 = parseFloat(document.getElementById("M1_i").value) == undefined ? 0 : parseFloat(document.getElementById("M1_i").value);
            starPoint2 = parseFloat(document.getElementById("M2_i").value) == undefined ? 0 : parseFloat(document.getElementById("M2_i").value);
            starPoint3 = parseFloat(document.getElementById("M3_i").value) == undefined ? 0 : parseFloat(document.getElementById("M3_i").value);
            centerPint1 = parseFloat(document.getElementById("M1_c").value) == undefined ? 0 : parseFloat(document.getElementById("M1_c").value);
            centerPint2 = parseFloat(document.getElementById("M2_c").value) == undefined ? 0 : parseFloat(document.getElementById("M2_c").value);
            centerPint3 = parseFloat(document.getElementById("M3_c").value) == undefined ? 0 : parseFloat(document.getElementById("M3_c").value);
            M1_updown = parseFloat(document.getElementById("M1_updown").value) == undefined || isNaN(parseFloat(document.getElementById("M1_updown").value)) ? 3 : parseFloat(document.getElementById("M1_updown").value);
            M2_updown = parseFloat(document.getElementById("M2_updown").value) == undefined || isNaN(parseFloat(document.getElementById("M2_updown").value)) ? 3 : parseFloat(document.getElementById("M2_updown").value);
            M3_updown = parseFloat(document.getElementById("M3_updown").value) == undefined || isNaN(parseFloat(document.getElementById("M3_updown").value)) ? 3 : parseFloat(document.getElementById("M3_updown").value);
            M1_updownini = parseFloat(document.getElementById("M1_updownini").value) == undefined || isNaN(parseFloat(document.getElementById("M1_updownini").value)) ? 3 : parseFloat(document.getElementById("M1_updownini").value);
            M2_updownini = parseFloat(document.getElementById("M2_updownini").value) == undefined || isNaN(parseFloat(document.getElementById("M2_updownini").value)) ? 3 : parseFloat(document.getElementById("M2_updownini").value);
            M3_updownini = parseFloat(document.getElementById("M3_updownini").value) == undefined || isNaN(parseFloat(document.getElementById("M3_updownini").value)) ? 3 : parseFloat(document.getElementById("M3_updownini").value);
            init = parseFloat(document.getElementById("init_fr").value) == undefined || isNaN(parseFloat(document.getElementById("init_fr").value)) ? -105 : parseFloat(document.getElementById("init_fr").value);
            StartFrequency = parseFloat(document.getElementById("StartFrequency").value) == undefined || isNaN(parseFloat(document.getElementById("StartFrequency").value)) ? 930.000000 : parseFloat(document.getElementById("StartFrequency").value).toFixed(6);
            StopFrequency = parseFloat(document.getElementById("StopFrequency").value) == undefined || isNaN(parseFloat(document.getElementById("StopFrequency").value)) ? 934.000000 : parseFloat(document.getElementById("StopFrequency").value).toFixed(6);
            generate();
            init_fr_radom = parseFloat(document.getElementById("init_fr_radom").value) == undefined || isNaN(parseFloat(document.getElementById("init_fr_radom").value)) ? 0.75 : parseFloat(document.getElementById("init_fr_radom").value);
            bottom_width1 = parseFloat(document.getElementById("bottom_width1").value) == undefined || isNaN(parseFloat(document.getElementById("bottom_width1").value)) ? 15 : parseFloat(document.getElementById("bottom_width1").value);
            bottom_width2 = parseFloat(document.getElementById("bottom_width2").value) == undefined || isNaN(parseFloat(document.getElementById("bottom_width2").value)) ? 15 : parseFloat(document.getElementById("bottom_width2").value);
            bottom_width3 = parseFloat(document.getElementById("bottom_width3").value) == undefined || isNaN(parseFloat(document.getElementById("bottom_width3").value)) ? 15 : parseFloat(document.getElementById("bottom_width3").value);
        }, false);
        generate();
        document.getElementById('export_button').addEventListener('click', function () {
            timeStamp = Date.parse(new Date())
            html2canvas(document.querySelector("#echarts")).then(canvas => {
                canvas.toBlob(blob => {
                    const href = window.URL.createObjectURL(new Blob([blob]))
                    const link = document.createElement('a')
                    link.href = href
                    link.download = '频谱图' + timeStamp + '.png'
                    document.body.appendChild(link)
                    link.click()
                    document.body.removeChild(link)
                }, 'image/png')
            });
            document.getElementById('echarts2').style.display = "block";
            html2canvas(document.querySelector("#echarts2")).then(canvas => {
                canvas.toBlob(blob => {
                    const href = window.URL.createObjectURL(new Blob([blob]))
                    const link = document.createElement('a')
                    link.href = href
                    link.download = '反色频谱图' + timeStamp + '.png'
                    document.body.appendChild(link)
                    link.click()
                    document.body.removeChild(link)
                }, 'image/png')
                document.getElementById('echarts2').style.display = "none";
            });
        }, false);

        function generate() {
            x_data = [];
            for (var i = 0; i < xy; i++) {
                x_data.push(parseFloat(StartFrequency) + i * ((parseFloat(StopFrequency) - parseFloat(StartFrequency)) / xy))
            }
            console.log(StartFrequency, StopFrequency)
            console.log(x_data)
            var y_data = [];
            var int_val = init_fr_radom;
            var int_val1 = 3;
            console.log(int_val)
            // 上升波形控制数值
            var left1 = 0;
            var left2 = 0;
            var left3 = 0;
            var iniup1 = 0;
            var iniup2 = 0;
            var iniup3 = 0;
            var cleft1 = 0;
            var cleft2 = 0;
            var cleft3 = 0;

            //下降波形数组，用于对称
            var right1 = [];
            var right2 = [];
            var right3 = [];
            var inidown1 = [];
            var inidown2 = [];
            var inidown3 = [];
            var cright1 = [];
            var cright2 = [];
            var cright3 = [];

            // 下降波形数组索引，用于从数组末尾开始检索，用于对称
            var right1Index = 0;
            var right2Index = 0;
            var right3Index = 0;
            var cright1Index = 0;
            var cright2Index = 0;
            var cright3Index = 0;
            var inidown1Index = 0;
            var inidown2Index = 0;
            var inidown3Index = 0;


            var topNum = 2
            for (var i = 0; i < xy; i++) {
                var randNum = generateRandomInteger(init - int_val, init + int_val)
                //生成点1
                if (starPoint1 >= 0 && mark1 != 0) {
                    if (document.getElementById("mySelectWidth1").value === "topWidth1") {
                        var dou1 = (centerPint1 - starPoint1 - 10) * 0.5
                        var dou2 = (centerPint1 - starPoint1 - 10) * 0.5
                        // var dou3 = (centerPint1 - starPoint1) * 0.3
                        // var dou4 = (centerPint1 - starPoint1) * 0.2
                        //顶部固定200k/30个点
                        var dou3 = 5
                        var dou4 = 5
                    } else {
                        var dou1 = (centerPint1 - starPoint1 - 15) * 0.5
                        var dou2 = (centerPint1 - starPoint1 - 15) * 0.5
                        // var dou3 = (centerPint1 - starPoint1) * 0.3
                        // var dou4 = (centerPint1 - starPoint1) * 0.2
                        //顶部固定200k/30个点
                        var dou3 = 10
                        var dou4 = 5
                    }
                    if (i >= starPoint1 - bottom_width1 && i < starPoint1) {
                        iniup1 = iniup1 + 0.5;
                        randNum = generateRandomInteger(init - int_val, init + int_val) + iniup1
                        if (randNum >= generateRandomInteger(init - int_val, init + int_val) + (mark1 - init) * 0.33 / dou1) {
                            randNum = generateRandomInteger(init - int_val, init) + iniup1 - 0.5
                        }
                        cleft1 = iniup1;
                        inidown1.push(randNum);
                        inidown1Index = inidown1.length;
                    }
                    //  上升底下抖动
                    if (i >= starPoint1 && i < starPoint1 + dou1) {
                        cleft1 = cleft1 + (mark1 - init) * 0.15 / dou1
                        randNum = generateRandomInteger(init - int_val, init + int_val) + cleft1
                        left1 = cleft1 - M1_updownini
                        cright1.push(randNum);
                        cright1Index = cright1.length;

                    }
                    //上升波形
                    if (i >= starPoint1 + dou1 && i < starPoint1 + dou1 + dou2) {
                        left1 = left1 + (mark1 - init) * 0.625 / dou2
                        randNum = generateRandomInteger(init - int_val, init + int_val) + left1
                        if (i % 2 === 0 && right1Index > 2) {
                            randNum = randNum - M1_updown
                        }
                        right1.push(randNum);
                        right1Index = right1.length;
                    }
                    //上升波峰抖动波形
                    if (i >= starPoint1 + dou1 + dou2 && i < starPoint1 + dou1 + dou2 + dou3) {
                        randNum = generateRandomInteger(mark1 - int_val1 - 1, mark1)
                        if (document.getElementById("mySelect1").value === "s1") {
                            randNum = generateRandomInteger(mark1 - int_val1, mark1 + topNum)
                        }
                    }
                    //峰值出现波形
                    if (i >= starPoint1 + dou1 + dou2 + dou3 && i <= starPoint1 + dou1 + dou2 + dou3 + dou4 * 2) {
                        randNum = generateRandomInteger(mark1 - int_val1 - 1, mark1)
                        if (document.getElementById("mySelect1").value === "s2") {
                            randNum = generateRandomInteger(mark1 - int_val1, mark1 + topNum)
                        }
                    }

                    //下降波峰抖动波形
                    if (i > starPoint1 + dou1 + dou2 + dou3 + dou4 * 2 && i <= starPoint1 + dou1 + dou2 + dou3 * 2 + dou4 * 2) {
                        randNum = generateRandomInteger(mark1 - int_val1 - 1, mark1)
                        if (document.getElementById("mySelect1").value === "s3") {
                            randNum = generateRandomInteger(mark1 - int_val1, mark1 + topNum)
                        }
                        // right1 = 7
                    }

                    //下降波形
                    if (i > starPoint1 + dou1 + dou2 + dou3 * 2 + dou4 * 2 && i <= starPoint1 + dou1 + dou2 * 2 + dou3 * 2 + dou4 * 2) {
                        right1Index = right1Index - 1;
                        randNum = right1[right1Index];
                    }
                    // //底下抖动
                    if (i > starPoint1 + dou1 + dou2 * 2 + dou3 * 2 + dou4 * 2 && i <= starPoint1 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2) {
                        cright1Index = cright1Index - 1;
                        randNum = cright1[cright1Index];
                    }
                    if (i > starPoint1 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2 && i <= starPoint1 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2 + bottom_width1) {
                        inidown1Index = inidown1Index - 1;
                        randNum = inidown1[inidown1Index]
                    }
                }


                //生成点2
                if (starPoint2 >= 0 && mark2 != 0) {
                    if (document.getElementById("mySelectWidth2").value === "topWidth1") {
                        var dou1 = (centerPint2 - starPoint2 - 10) * 0.5
                        var dou2 = (centerPint2 - starPoint2 - 10) * 0.5
                        // var dou3 = (centerPint1 - starPoint1) * 0.3
                        // var dou4 = (centerPint1 - starPoint1) * 0.2
                        //顶部固定200k/30个点
                        var dou3 = 5
                        var dou4 = 5
                    } else {
                        var dou1 = (centerPint2 - starPoint2 - 15) * 0.5
                        var dou2 = (centerPint2 - starPoint2 - 15) * 0.5
                        // var dou3 = (centerPint1 - starPoint1) * 0.3
                        // var dou4 = (centerPint1 - starPoint1) * 0.2
                        //顶部固定200k/30个点
                        var dou3 = 10
                        var dou4 = 5
                    }
                    if (i >= starPoint2 - bottom_width2 && i < starPoint2) {
                        if (starPoint2 < centerPint1 + 30 + 60) {
                            iniup2 = iniup2 + 0.5;
                            var tmp = generateRandomInteger(init - int_val, init + int_val) + iniup2
                            if (tmp >= generateRandomInteger(init - int_val, init + int_val) + (mark2 - init) * 0.33 / dou1) {
                                tmp = generateRandomInteger(init - int_val, init) + iniup2 - 0.5
                            }
                            cleft2 = iniup2;
                            inidown2.push(tmp);
                            inidown2Index = inidown2.length;
                        } else {
                            iniup2 = iniup2 + 0.5;
                            randNum = generateRandomInteger(init - int_val, init + int_val) + iniup2
                            if (randNum >= generateRandomInteger(init - int_val, init + int_val) + (mark2 - init) * 0.33 / dou1) {
                                randNum = generateRandomInteger(init - int_val, init) + iniup2 - 0.5
                            }
                            cleft2 = iniup2;
                            inidown2.push(randNum);
                            inidown2Index = inidown2.length;
                        }
                    }

                    //  上升底下抖动
                    if (i >= starPoint2 && i < starPoint2 + dou1) {
                        cleft2 = cleft2 + (mark2 - init) * 0.15 / dou1
                        randNum = generateRandomInteger(init - int_val, init + int_val) + cleft2
                        left2 = cleft2 - M2_updownini
                        cright2.push(randNum);
                        cright2Index = cright2.length;

                    }
                    //上升波形
                    if (i >= starPoint2 + dou1 && i < starPoint2 + dou1 + dou2) {
                        left2 = left2 + (mark2 - init) * 0.625 / dou2
                        randNum = generateRandomInteger(init - int_val, init + int_val) + left2
                        if (i % 2 === 0 && i > starPoint2 + dou1) {
                            randNum = randNum - M2_updown
                        }
                        right2.push(randNum);
                        right2Index = right2.length;
                    }
                    //上升波峰抖动波形
                    if (i >= starPoint2 + dou1 + dou2 && i < starPoint2 + dou1 + dou2 + dou3) {
                        randNum = generateRandomInteger(mark2 - int_val1 - 1, mark2)
                        if (document.getElementById("mySelect2").value === "s1") {
                            randNum = generateRandomInteger(mark2 - int_val1, mark2 + topNum)
                        }
                    }
                    //峰值出现波形
                    if (i >= starPoint2 + dou1 + dou2 + dou3 && i <= starPoint2 + dou1 + dou2 + dou3 + dou4 * 2) {
                        randNum = generateRandomInteger(mark2 - int_val1 - 1, mark2)
                        if (document.getElementById("mySelect2").value === "s2") {
                            randNum = generateRandomInteger(mark2 - int_val1, mark2 + topNum)
                        }
                    }

                    //下降波峰抖动波形
                    if (i > starPoint2 + dou1 + dou2 + dou3 + dou4 * 2 && i <= starPoint2 + dou1 + dou2 + dou3 * 2 + dou4 * 2) {
                        randNum = generateRandomInteger(mark2 - int_val1 - 1, mark2)
                        if (document.getElementById("mySelect2").value === "s3") {
                            randNum = generateRandomInteger(mark2 - int_val1, mark2 + 3)
                        }
                        // right2 = 7
                    }

                    //下降波形
                    if (i > starPoint2 + dou1 + dou2 + dou3 * 2 + dou4 * 2 && i <= starPoint2 + dou1 + dou2 * 2 + dou3 * 2 + dou4 * 2) {
                        right2Index = right2Index - 1;
                        randNum = right2[right2Index];
                    }
                    // //底下抖动
                    if (i > starPoint2 + dou1 + dou2 * 2 + dou3 * 2 + dou4 * 2 && i <= starPoint2 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2) {
                        cright2Index = cright2Index - 1;
                        randNum = cright2[cright2Index];
                    }
                    if (i > starPoint2 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2 && i <= starPoint2 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2 + bottom_width2) {
                        inidown2Index = inidown2Index - 1;
                        randNum = inidown2[inidown2Index]
                    }
                }

                //生成点3
                if (starPoint3 >= 0 && mark3 != 0) {
                    if (document.getElementById("mySelectWidth3").value === "topWidth1") {
                        var dou1 = (centerPint3 - starPoint3 - 10) * 0.5
                        var dou2 = (centerPint3 - starPoint3 - 10) * 0.5
                        // var dou3 = (centerPint1 - starPoint1) * 0.3
                        // var dou4 = (centerPint1 - starPoint1) * 0.2
                        //顶部固定200k/30个点
                        var dou3 = 5
                        var dou4 = 5
                    } else {
                        var dou1 = (centerPint3 - starPoint3 - 15) * 0.5
                        var dou2 = (centerPint3 - starPoint3 - 15) * 0.5
                        // var dou3 = (centerPint1 - starPoint1) * 0.3
                        // var dou4 = (centerPint1 - starPoint1) * 0.2
                        //顶部固定200k/30个点
                        var dou3 = 10
                        var dou4 = 5
                    }
                    if (i >= starPoint3 - bottom_width3 && i < starPoint3) {
                        if (starPoint3 < centerPint2 + 30 + 60) {
                            iniup3 = iniup3 + 0.5;
                            var tmp = generateRandomInteger(init - int_val, init + int_val) + iniup3
                            if (tmp >= generateRandomInteger(init - int_val, init + int_val) + (mark3 - init) * 0.33 / dou1) {
                                tmp = generateRandomInteger(init - int_val, init) + iniup3 - 0.5
                            }
                            cleft3 = iniup3;
                            inidown3.push(tmp);
                            inidown3Index = inidown3.length;
                        } else {
                            iniup3 = iniup3 + 0.5;
                            randNum = generateRandomInteger(init - int_val, init + int_val) + iniup3
                            if (randNum >= generateRandomInteger(init - int_val, init + int_val) + (mark3 - init) * 0.33 / dou1) {
                                randNum = generateRandomInteger(init - int_val, init) + iniup3 - 0.5
                            }
                            cleft3 = iniup3;
                            inidown3.push(randNum);
                            inidown3Index = inidown3.length;
                        }
                    }
                    //  上升底下抖动
                    if (i >= starPoint3 && i < starPoint3 + dou1) {
                        cleft3 = cleft3 + (mark3 - init) * 0.15 / dou1
                        randNum = generateRandomInteger(init - int_val, init + int_val) + cleft3
                        left3 = cleft3 - M3_updownini
                        cright3.push(randNum);
                        cright3Index = cright3.length;

                    }
                    //上升波形
                    if (i >= starPoint3 + dou1 && i < starPoint3 + dou1 + dou2) {
                        left3 = left3 + (mark3 - init) * 0.625 / dou2
                        randNum = generateRandomInteger(init - int_val, init + int_val) + left3
                        if (i % 2 === 0 && i > starPoint3 + dou1) {
                            randNum = randNum - M3_updown
                        }
                        right3.push(randNum);
                        right3Index = right3.length;
                    }
                    //上升波峰抖动波形
                    if (i >= starPoint3 + dou1 + dou2 && i < starPoint3 + dou1 + dou2 + dou3) {
                        randNum = generateRandomInteger(mark3 - int_val1 - 1, mark3)
                        if (document.getElementById("mySelect3").value === "s1") {
                            randNum = generateRandomInteger(mark3 - int_val1, mark3 + topNum)
                        }
                    }
                    //峰值出现波形
                    if (i >= starPoint3 + dou1 + dou2 + dou3 && i <= starPoint3 + dou1 + dou2 + dou3 + dou4 * 2) {
                        randNum = generateRandomInteger(mark3 - int_val1 - 1, mark3)
                        if (document.getElementById("mySelect3").value === "s2") {
                            randNum = generateRandomInteger(mark3 - int_val1, mark3 + topNum)
                        }
                    }

                    //下降波峰抖动波形
                    if (i > starPoint3 + dou1 + dou2 + dou3 + dou4 * 2 && i <= starPoint3 + dou1 + dou2 + dou3 * 2 + dou4 * 2) {
                        randNum = generateRandomInteger(mark3 - int_val1 - 1, mark3)
                        if (document.getElementById("mySelect3").value === "s3") {
                            randNum = generateRandomInteger(mark3 - int_val1, mark3 + 3)
                        }
                        // right3 = 7
                    }

                    //下降波形
                    if (i > starPoint3 + dou1 + dou2 + dou3 * 2 + dou4 * 2 && i <= starPoint3 + dou1 + dou2 * 2 + dou3 * 2 + dou4 * 2) {
                        right3Index = right3Index - 1;
                        randNum = right3[right3Index];
                    }
                    // //底下抖动
                    if (i > starPoint3 + dou1 + dou2 * 2 + dou3 * 2 + dou4 * 2 && i <= starPoint3 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2) {
                        cright3Index = cright3Index - 1;
                        randNum = cright3[cright3Index];
                    }
                    if (i > starPoint3 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2 && i <= starPoint3 + dou1 * 2 + dou2 * 2 + dou3 * 2 + dou4 * 2 + bottom_width3) {
                        inidown3Index = inidown3Index - 1;
                        randNum = inidown3[inidown3Index]
                    }
                }
                if (randNum == undefined) {
                    randNum = generateRandomInteger(init - int_val, init + int_val)
                }

                //生成点4
                //生成点5






                y_data.push(randNum);
                console.log(y_data)
            }

            //正常
            option = {
                //             x：直角坐标系内绘图网格与左侧距离，数值单位 px，支持百分比（字符串），如：50%
                //             x2：直角坐标系内绘图网格与右侧距离，数值单位 px，支持百分比（字符串），如：50%
                //             y：直角坐标系内绘图网格与顶部距离，数值单位 px，支持百分比（字符串），如：50%
                //              y2：直角坐标系内绘图网格与底部距离，数值单位 px，支持百分比（字符串），如：50%
                grid: {
                    x: 65,
                    y: 50,
                    x2: 5,
                    y2: 50
                },
                title: [
                    {
                        top: "22",
                        left: '0',
                        text: 'Ref:-20.00dBm',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "22",
                        left: '230',
                        text: '#Att:0dB',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "45",
                        text: 'Log\n10\ndB/',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "195",
                        text: 'LgAv',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "258",
                        text: '1M\tP',
                        textStyle: {
                            //文字颜色
                            color: '#e8ea6d',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "280",
                        text: '2S\tP',
                        textStyle: {
                            //文字颜色
                            color: '#2c7e3e',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "302",
                        text: '3S\tP',
                        textStyle: {
                            //文字颜色
                            color: '#48a3a3',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "324",
                        text: '4S\tP',
                        textStyle: {
                            //文字颜色
                            color: '#af25af',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "365",
                        text: 'FC',
                        left: '18',
                        textStyle: {
                            //文字颜色
                            color: '#FFFFFF',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "490",
                        text: 'ETrg\nFFT',
                        left: '2',
                        textStyle: {
                            //文字颜色
                            color: '#FFFFFF',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        text: 'Start:' + parseFloat(StartFrequency).toFixed(6) + ' MHz',
                        bottom: '20',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23

                        },
                    },
                    {
                        text: 'Stop:' + parseFloat(StopFrequency).toFixed(6) + ' MHz',
                        bottom: '20',
                        right: '30',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23

                        },
                    },
                    {
                        text: '#Res BW:1.000 kHz',
                        bottom: '0',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        },
                    },
                    {
                        text: '#VBW:3.000 kHz',
                        left: '280',
                        bottom: '0',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        },
                    },
                    {
                        text: 'Sweep:617.31 ms\t\t\t\t\t\t\t ',
                        right: '28',
                        bottom: '0',
                        textStyle: {
                            //文字颜色
                            color: '#ffffff',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        },
                    },
                    //画y轴刻度
                    {
                        top: "85",
                        left: '60',
                        text: '-30.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "143",
                        left: '60',
                        text: '-40.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "200",
                        left: '60',
                        text: '-50.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "259",
                        left: '60',
                        text: '-60.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "315",
                        left: '60',
                        text: '-70.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "373",
                        left: '60',
                        text: '-80.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "432",
                        left: '60',
                        text: '-90.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "489",
                        left: '60',
                        text: '-100.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "549",
                        left: '60',
                        text: '-110.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "608",
                        left: '60',
                        text: '-120.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                ],
                backgroundColor: '#000000',
                xAxis: {
                    type: 'category',
                    axisLabel: {
                        interval: 59 //x轴数据距离x轴的距离
                        , show: false
                    },
                    data: x_data,
                    splitLine: {
                        show: true, //让网格显示
                        lineStyle: {
                            //网格样式
                            color: ['#FFFFFF'], //网格的颜色
                            width: 1, //网格的宽度
                            type: 'solid' //网格是实实线，可以修改成虚线以及其他的类型
                        }
                    },
                },
                yAxis: {
                    type: 'value',
                    min: -120,
                    max: -20,
                    interval: 10,
                    splitLine: {
                        show: true,
                        lineStyle: {
                            color: ['#FFFFFF'],
                            width: 1,
                            type: 'solid'
                        }
                    },
                    axisLabel: {
                        show: false,
                        color: '#ffffff',
                        // inside: true,
                    }
                },
                series: [
                    {
                        data: y_data,
                        type: 'line',
                        color: '#ffffff', //改变折线点的颜色
                        lineStyle: {
                            color: '#F0E68C', //改变折线颜色
                            width: 2
                        },
                        markPoint: {
                            data: [
                                {
                                    coord: ['' + x_data[centerPint1], '' + y_data[centerPint1]],
                                    value: '1',
                                    symbol: "circle",
                                    symbolSize: 5,
                                    animation: true,
                                    label: {
                                        offset: [0, -10],
                                        show: true,
                                        color: '#ffffff',
                                        fontSize: 23
                                    },
                                    itemStyle: { color: '#ffffff' }
                                },
                                {
                                    coord: ['' + x_data[centerPint2], '' + y_data[centerPint2]],
                                    value: '2',
                                    symbol: "circle",
                                    symbolSize: 5,
                                    animation: true,
                                    label: {
                                        offset: [0, -10],
                                        show: true,
                                        color: '#ffffff',
                                        fontSize: 23
                                    },
                                    itemStyle: { color: '#ffffff' }
                                },
                                {
                                    coord: ['' + x_data[centerPint3], '' + y_data[centerPint3]],
                                    value: '3',
                                    symbol: "circle",
                                    symbolSize: 5,
                                    animation: true,
                                    label: {
                                        offset: [0, -10],
                                        show: true,
                                        color: '#ffffff',
                                        fontSize: 23
                                    },
                                    itemStyle: { color: '#ffffff' }
                                },
                            ],
                        },
                    }
                ]
            };
            //判断显示几个峰值
            if (centerPint1 >= 0 && mark1 != 0) {
                var title_m = {
                    top: '1',
                    right: '260',
                    // text: 'M1:' + x_data[getMaxIndex(y_data, starPoint1 - 5, starPoint1 + 65)].toFixed(2) + ' MHz',
                    text: 'M1:' + x_data[centerPint1].toFixed(2) + ' MHz',
                    textStyle: {
                        //文字颜色
                        color: '#ffffff',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                var title_db = {
                    top: '1',
                    right: '10',
                    // text: getMax(y_data, starPoint1 - 5, starPoint1 + 65) + 'dBm',
                    text: y_data[centerPint1].toFixed(2) + 'dBm',
                    textStyle: {
                        //文字颜色
                        color: '#ffffff',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                option.title.push(title_m)
                option.title.push(title_db)
            }
            if (centerPint2 >= 0 && mark2 != 0) {
                var title_m = {
                    top: '22',
                    right: '260',
                    text: 'M2:' + x_data[centerPint2].toFixed(2) + ' MHz',
                    textStyle: {
                        //文字颜色
                        color: '#ffffff',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                var title_db = {
                    top: '22',
                    right: '10',
                    text: y_data[centerPint2].toFixed(2) + 'dBm',
                    textStyle: {
                        //文字颜色
                        color: '#ffffff',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                option.title.push(title_m)
                option.title.push(title_db)
            }
            if (centerPint3 >= 0 && mark3 != 0) {
                var title_m = {
                    top: '43',
                    right: '260',
                    text: 'M3:' + x_data[centerPint3].toFixed(2) + ' MHz',
                    textStyle: {
                        //文字颜色
                        color: '#ffffff',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                var title_db = {
                    top: '43',
                    right: '10',
                    text: y_data[centerPint3].toFixed(2) + 'dBm',
                    textStyle: {
                        //文字颜色
                        color: '#ffffff',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                option.title.push(title_m)
                option.title.push(title_db)
            }
            myChart.setOption(option);

            // 反色
            var option2 = {
                //             x：直角坐标系内绘图网格与左侧距离，数值单位 px，支持百分比（字符串），如：50%
                //             x2：直角坐标系内绘图网格与右侧距离，数值单位 px，支持百分比（字符串），如：50%
                //             y：直角坐标系内绘图网格与顶部距离，数值单位 px，支持百分比（字符串），如：50%
                //              y2：直角坐标系内绘图网格与底部距离，数值单位 px，支持百分比（字符串），如：50%
                grid: {
                    x: 65,
                    y: 50,
                    x2: 5,
                    y2: 50
                },
                title: [
                    {
                        top: "22",
                        left: '0',
                        text: 'Ref:-20.00dBm',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "22",
                        left: '230',
                        text: '#Att:0dB',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "45",
                        text: 'Log\n10\ndB/',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "195",
                        text: 'LgAv',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "258",
                        text: '1M\tP',
                        textStyle: {
                            //文字颜色
                            color: '#483db8',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "280",
                        text: '2S\tP',
                        textStyle: {
                            //文字颜色
                            color: '#2c7e3e',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "302",
                        text: '3S\tP',
                        textStyle: {
                            //文字颜色
                            color: '#48a3a3',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "324",
                        text: '4S\tP',
                        textStyle: {
                            //文字颜色
                            color: '#af25af',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "365",
                        text: 'FC',
                        left: '18',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        top: "490",
                        text: 'ETrg\nFFT',
                        left: '2',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        }
                    },
                    {
                        text: 'Start:' + parseFloat(StartFrequency).toFixed(6) + ' MHz',
                        bottom: '20',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23

                        },
                    },
                    {
                        text: 'Stop:' + parseFloat(StopFrequency).toFixed(6) + ' MHz',
                        bottom: '20',
                        right: '30',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23

                        },
                    },
                    {
                        text: '#Res BW:1.000 kHz',
                        bottom: '0',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        },
                    },
                    {
                        text: '#VBW:3.000 kHz',
                        left: '280',
                        bottom: '0',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        },
                    },
                    {
                        text: 'Sweep:617.31 ms\t\t\t\t\t\t\t ',
                        right: '28',
                        bottom: '0',
                        textStyle: {
                            //文字颜色
                            color: '#000000',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 23
                        },
                    },
                    //画y轴刻度
                    {
                        top: "85",
                        left: '60',
                        text: '-30.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "143",
                        left: '60',
                        text: '-40.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "200",
                        left: '60',
                        text: '-50.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "259",
                        left: '60',
                        text: '-60.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "315",
                        left: '60',
                        text: '-70.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "373",
                        left: '60',
                        text: '-80.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "432",
                        left: '60',
                        text: '-90.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "489",
                        left: '60',
                        text: '-100.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "549",
                        left: '60',
                        text: '-110.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                    {
                        top: "608",
                        left: '60',
                        text: '-120.00',
                        textStyle: {
                            //文字颜色
                            color: '#C0C0C0',
                            //字体风格,'normal','italic','oblique'
                            fontStyle: 'normal',
                            //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                            fontWeight: 'normal',
                            //字体系列
                            fontFamily: 'UniFont',
                            fontSize: 18
                        }
                    },
                ],
                backgroundColor: '#ffffff',
                xAxis: {
                    type: 'category',
                    axisLabel: {
                        interval: 59 //x轴数据距离x轴的距离
                        , show: false
                    },
                    data: x_data,
                    splitLine: {
                        show: true, //让网格显示
                        lineStyle: {
                            //网格样式
                            color: ['#000000'], //网格的颜色
                            width: 1, //网格的宽度
                            type: 'solid' //网格是实实线，可以修改成虚线以及其他的类型
                        }
                    },
                },
                yAxis: {
                    type: 'value',
                    min: -120,
                    max: -20,
                    interval: 10,
                    splitLine: {
                        show: true,
                        lineStyle: {
                            color: ['#000000'],
                            width: 1,
                            type: 'solid'
                        }
                    },
                    axisLabel: {
                        show: false,
                        color: '#000000',
                        // inside: true,
                    }
                },
                series: [
                    {
                        data: y_data,
                        type: 'line',
                        color: '#000000', //改变折线点的颜色
                        lineStyle: {
                            color: '#483db8', //改变折线颜色
                            width: 2
                        },
                        markPoint: {
                            data: [
                                {
                                    coord: ['' + x_data[centerPint1], '' + y_data[centerPint1]],
                                    value: '1',
                                    symbol: "circle",
                                    symbolSize: 5,
                                    animation: true,
                                    label: {
                                        offset: [0, -10],
                                        show: true,
                                        color: '#000000',
                                        fontSize: 23
                                    },
                                    itemStyle: { color: '#000000' }
                                },
                                {
                                    coord: ['' + x_data[centerPint2], '' + y_data[centerPint2]],
                                    value: '2',
                                    symbol: "circle",
                                    symbolSize: 5,
                                    animation: true,
                                    label: {
                                        offset: [0, -10],
                                        show: true,
                                        color: '#000000',
                                        fontSize: 23
                                    },
                                    itemStyle: { color: '#000000' }
                                },
                                {
                                    coord: ['' + x_data[centerPint3], '' + y_data[centerPint3]],
                                    value: '3',
                                    symbol: "circle",
                                    symbolSize: 5,
                                    animation: true,
                                    label: {
                                        offset: [0, -10],
                                        show: true,
                                        color: '#000000',
                                        fontSize: 23
                                    },
                                    itemStyle: { color: '#000000' }
                                },
                            ],
                        },
                    }
                ]
            };
            //判断显示几个峰值
            if (centerPint1 >= 0 && mark1 != 0) {
                var title_m = {
                    top: '1',
                    right: '260',
                    text: 'M1:' + x_data[centerPint1].toFixed(2) + ' MHz',
                    textStyle: {
                        //文字颜色
                        color: '#000000',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                var title_db = {
                    top: '1',
                    right: '10',
                    text: y_data[centerPint1].toFixed(2) + 'dBm',
                    textStyle: {
                        //文字颜色
                        color: '#000000',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                option2.title.push(title_m)
                option2.title.push(title_db)
            }
            if (centerPint2 >= 0 && mark2 != 0) {
                var title_m = {
                    top: '22',
                    right: '260',
                    text: 'M2:' + x_data[centerPint2].toFixed(2) + ' MHz',
                    textStyle: {
                        //文字颜色
                        color: '#000000',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                var title_db = {
                    top: '22',
                    right: '10',
                    text: y_data[centerPint2].toFixed(2) + 'dBm',
                    textStyle: {
                        //文字颜色
                        color: '#000000',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                option2.title.push(title_m)
                option2.title.push(title_db)
            }
            if (centerPint3 >= 0 && mark3 != 0) {
                var title_m = {
                    top: '43',
                    right: '260',
                    text: 'M3:' + x_data[centerPint3].toFixed(2) + ' MHz',
                    textStyle: {
                        //文字颜色
                        color: '#000000',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                var title_db = {
                    top: '43',
                    right: '10',
                    text: y_data[centerPint3].toFixed(2) + 'dBm',
                    textStyle: {
                        //文字颜色
                        color: '#000000',
                        //字体风格,'normal','italic','oblique'
                        fontStyle: 'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight: 'normal',
                        //字体系列
                        fontFamily: 'UniFont',
                        fontSize: 23
                    }
                }
                option2.title.push(title_m)
                option2.title.push(title_db)
            }

            myChart2.setOption(option2);
            // document.getElementById('echarts2').style.display = "none";
        }
    </script>
</body>

</html>